# Database Configuration
# SECURITY: Replace with actual values in .env.local (development) or secrets manager (production)
DB_HOST=localhost
DB_PORT=5432
DB_USER=exam_bank_user
DB_PASSWORD=CHANGE_ME_IN_ENV_LOCAL
DB_NAME=exam_bank_db
DB_SSLMODE=disable

# Prisma Database URL (for frontend Prisma Client)
# SECURITY: Replace password with actual value in .env.local
DATABASE_URL=postgresql://exam_bank_user:CHANGE_ME_IN_ENV_LOCAL@localhost:5432/exam_bank_db?schema=public&sslmode=disable

# Server Configuration
GRPC_PORT=50051
HTTP_PORT=8080
ENV=development

# Port Configuration for Docker
FRONTEND_PORT=3000
BACKEND_HTTP_PORT=8080
BACKEND_GRPC_PORT=50051
DB_PORT=5432
REDIS_PORT=6379
OPENSEARCH_PORT=9200
OPENSEARCH_DASHBOARDS_PORT=5601

# JWT Configuration (Unified)
# SECURITY: Generate strong secrets with: openssl rand -base64 64
# Primary JWT secret - used for all tokens if separate secrets not provided
JWT_SECRET=GENERATE_WITH_OPENSSL_RAND_BASE64_64

# Optional: Separate secrets for access and refresh tokens (leave empty to use JWT_SECRET)
# SECURITY: Use separate secrets for better security
# JWT_ACCESS_SECRET=GENERATE_WITH_OPENSSL_RAND_BASE64_64
# JWT_REFRESH_SECRET=GENERATE_WITH_OPENSSL_RAND_BASE64_64

# JWT expiry times (handled by code, these are deprecated)
# JWT_EXPIRY=24h
# JWT_REFRESH_EXPIRY=30d

# Application Configuration
APP_ENV=development
LOG_LEVEL=info

# Frontend Configuration (for development)
VITE_GRPC_WEB_URL=http://localhost:8080
VITE_API_BASE_URL=http://localhost:8080
VITE_APP_TITLE=Exam Bank System

# Docker Configuration
# SECURITY: Replace with actual values in .env.local
POSTGRES_DB=exam_bank_db
POSTGRES_USER=exam_bank_user
POSTGRES_PASSWORD=CHANGE_ME_IN_ENV_LOCAL

# Development Tools
ENABLE_GRPC_REFLECTION=true
ENABLE_CORS=true

# Google OAuth Configuration - REQUIRED for Google login
# SECURITY: Get these from Google Cloud Console > APIs & Services > Credentials
# See docs/setup/GOOGLE_OAUTH_SETUP_GUIDE.md for detailed setup instructions
GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=YOUR_GOOGLE_CLIENT_SECRET
GOOGLE_REDIRECT_URI=http://localhost:3000/api/auth/callback/google

# IMPORTANT: Google OAuth is now ENABLED by default
# To disable Google OAuth, remove or comment out GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET

# NextAuth Configuration - SECURITY ENHANCED
# NEXTAUTH_URL must match your domain (dev: localhost:3000, prod: your-domain.com)
NEXTAUTH_URL=http://localhost:3000
# NEXTAUTH_SECRET: Generate with: openssl rand -base64 32
# CRITICAL: Use strong secret in production (min 32 chars)
# SECURITY: Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=GENERATE_WITH_OPENSSL_RAND_BASE64_32

# SECURITY: httpOnly cookies are now enabled by default
# Production uses __Secure- and __Host- prefixed cookies for enhanced security
# Development uses standard cookie names for easier debugging

# Session Configuration (Unified)
MAX_CONCURRENT_SESSIONS=5
# SESSION_EXPIRE_HOURS is deprecated - handled by JWT expiry

# Authentication Security Configuration
BCRYPT_COST=12

# Authentication Rate Limiting
LOGIN_RATE_LIMIT_PER_MINUTE=5
REGISTRATION_RATE_LIMIT_PER_HOUR=3
PASSWORD_RESET_RATE_LIMIT_PER_HOUR=3

# Security Configuration
BCRYPT_COST=10
MAX_LOGIN_ATTEMPTS=5
LOCK_DURATION_MINUTES=30

# TeX Live Configuration
TEXLIVE_BIN=/usr/local/texlive/2023/bin/x86_64-linux
LATEX_ENGINE=lualatex  # Options: lualatex, xelatex, pdflatex
LATEX_TIMEOUT_SECONDS=50
LATEX_WORKING_DIR=/tmp/latex

# Image Processing Configuration
IMAGE_CONVERTER=magick  # Options: magick, cwebp
IMAGE_TMP_DIR=/tmp/images
IMAGE_OUTPUT_DIR=/var/lib/exam-bank/images
IMAGE_QUALITY=85
IMAGE_MAX_WIDTH=1200
IMAGE_MAX_HEIGHT=1600

# Google Drive Configuration
# SECURITY: Get these from Google Cloud Console
GOOGLE_DRIVE_CLIENT_ID=YOUR_DRIVE_CLIENT_ID
GOOGLE_DRIVE_CLIENT_SECRET=YOUR_DRIVE_CLIENT_SECRET
GOOGLE_DRIVE_REFRESH_TOKEN=YOUR_DRIVE_REFRESH_TOKEN
GOOGLE_DRIVE_FOLDER_ID=YOUR_ROOT_FOLDER_ID
GOOGLE_DRIVE_UPLOAD_TIMEOUT=30
GOOGLE_DRIVE_MAX_RETRIES=3

# Redis Configuration
# SECURITY: Use strong password in production
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=CHANGE_ME_IN_ENV_LOCAL
REDIS_ENABLED=true
REDIS_MAX_RETRIES=3
REDIS_TIMEOUT=5s
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=2

# Optional: External Services
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
