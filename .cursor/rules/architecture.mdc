---
alwaysApply: true
---
# Architecture & Structure Rules - Exam Bank System
## Folder Structure, Naming Conventions, and Organization Patterns

---

## ğŸ“ Backend Structure (Go + gRPC)

### Directory Organization
```
apps/backend/internal/
â”œâ”€â”€ entity/              # Domain models
â”œâ”€â”€ repository/          # Data access (interfaces + implementations)
â”œâ”€â”€ service/             # Business logic (feature-based)
â”œâ”€â”€ grpc/                # gRPC handlers (thin layer)
â”œâ”€â”€ middleware/          # gRPC interceptors
â”œâ”€â”€ config/              # Configuration
â””â”€â”€ util/                # Shared utilities
```

### Naming Conventions (Go)
- **Files**: snake_case (`exam_service.go`)
- **Types**: PascalCase (`type ExamService struct {}`)
- **Functions**: PascalCase (exported), camelCase (unexported)
- **Constants**: PascalCase or SCREAMING_SNAKE_CASE

### Layer Pattern (Go)
- **gRPC handlers**: Thin - auth, validation, conversion only
- **Services**: Fat - business logic, coordination
- **Repository**: Data access, query building
- **Entity**: Domain models, database-agnostic

---

## ğŸ“ Frontend Structure (Next.js 14 + TypeScript)

### Directory Organization
```
apps/frontend/src/
â”œâ”€â”€ app/                 # Next.js App Router pages
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ features/       # Feature-specific components
â”‚   â”‚   â””â”€â”€ exams/
â”‚   â”‚       â”œâ”€â”€ shared/      # Reusable within feature
â”‚   â”‚       â”œâ”€â”€ browse/      # Route-specific
â”‚   â”‚       â””â”€â”€ create/
â”‚   â”œâ”€â”€ ui/             # Base UI (Shadcn)
â”‚   â”œâ”€â”€ layout/         # Layout components
â”‚   â””â”€â”€ common/         # Shared across app
â”œâ”€â”€ lib/                # Utilities, helpers, config
â”œâ”€â”€ services/           # API/gRPC clients
â”œâ”€â”€ hooks/              # Custom React hooks (feature-based)
â”œâ”€â”€ types/              # TypeScript definitions
â””â”€â”€ contexts/           # React contexts
```

### Naming Conventions (TypeScript/React)
- **Files**: kebab-case (`exam-card.tsx`, `use-exam-data.ts`)
- **Components**: PascalCase (`export function ExamCard()`)
- **Hooks**: camelCase starting with `use` (`useExamData()`)
- **Types/Interfaces**: PascalCase (`interface ExamCardProps {}`)

### Component Structure
```typescript
"use client"; // If client component

// 1. External dependencies
import React from "react";

// 2. Internal modules
import { Button } from "@/components/ui";
import { useExamData } from "@/hooks/exam";

// 3. Types
import type { Exam } from "@/types/exam";

// 4. Component
export function ExamCard({ exam }: { exam: Exam }) {
  // Implementation
}
```

---

## ğŸ“ Mobile Structure (Flutter + Clean Architecture)

### Directory Organization
```
apps/mobile/lib/
â”œâ”€â”€ core/                # DI, network, storage, theme
â”œâ”€â”€ features/            # Feature modules (feature-based)
â”‚   â””â”€â”€ auth/
â”‚       â”œâ”€â”€ data/           # Datasources, models, repositories
â”‚       â”œâ”€â”€ domain/         # Entities, repository interfaces, usecases
â”‚       â””â”€â”€ presentation/   # BLoC, pages, widgets
â”œâ”€â”€ shared/              # Shared models, widgets
â””â”€â”€ main.dart
```

### Naming Conventions (Dart)
- **Files**: snake_case (`auth_repository.dart`)
- **Classes**: PascalCase (`class AuthRepository {}`)
- **Variables/Functions**: camelCase (`String userName = "John"`)
- **Constants**: lowerCamelCase or SCREAMING_SNAKE_CASE

### Layer Dependencies
```
Presentation â†’ Domain â†’ Data
     â†“
   BLoC (state management)
```

- **Presentation**: Pages, widgets, BLoC
- **Domain**: Entities, repository interfaces, usecases
- **Data**: Remote/local datasources, repository implementations

---

## ğŸ”„ Cross-Platform Pattern

### gRPC Proto Organization
```
packages/proto/
â”œâ”€â”€ common/              # Shared messages
â””â”€â”€ v1/                  # API version 1
    â”œâ”€â”€ auth_service.proto
    â”œâ”€â”€ exam_service.proto
    â””â”€â”€ question_service.proto
```

### Error Handling
- Go: Custom error types, return errors
- TypeScript: gRPC status codes, throw errors
- Dart: Either<Failure, Success> pattern (dartz package)

---

## âœ… File Placement Checklist

**Before creating new file:**
- [ ] Check if similar functionality exists
- [ ] Follow feature-based organization
- [ ] Use correct naming convention for platform
- [ ] Place in correct layer (presentation/domain/data)
- [ ] Not duplicating existing files

**Before adding new feature:**
- [ ] Create feature folder in appropriate location
- [ ] Set up all necessary layers
- [ ] Define interfaces before implementations
- [ ] Follow dependency injection pattern

---

**Key Principles:**
- âœ… Feature-based over type-based organization
- âœ… Separation of concerns (layers)
- âœ… Consistent naming across platforms
- âœ… Thin handlers/controllers, fat services
- âœ… Interface-driven development
