# Codebase Clean Up Plan - 16/08/2025

**Dá»± Ã¡n**: NyNus Exam Bank System  
**Má»¥c tiÃªu**: Clean up cÃ¡c demo pages, test files vÃ  components khÃ´ng cáº§n thiáº¿t  
**NgÃ y táº¡o**: 16/08/2025  
**Workspace**: `d:\0.111\exam-bank-system`

---

## ğŸ“‹ Tá»•ng quan Clean Up

### ğŸ¯ Má»¥c tiÃªu
- Loáº¡i bá» cÃ¡c demo pages khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng trong production
- XÃ³a test components vÃ  files development khÃ´ng cáº§n thiáº¿t
- Giá»¯ nguyÃªn core functionality vÃ  build process
- Äáº£m báº£o TypeScript type-check vÃ  ESLint pass

### âš ï¸ LÆ°u Ã½ quan trá»ng
- **KHÃ”NG** xÃ³a thÆ° má»¥c `mockdata` - cáº§n thiáº¿t cho development
- **KHÃ”NG** xá»­ lÃ½ broken links trÃªn homepage (sáº½ xá»­ lÃ½ riÃªng)
- **KHÃ”NG** xÃ³a build scripts vÃ  tools cáº§n thiáº¿t

---

## ğŸ“ Danh sÃ¡ch Files cáº§n xÃ³a

### 1. Demo Pages (Root Level)
```
apps/frontend/src/app/latex-demo/
â”œâ”€â”€ page.tsx                           # LaTeX demo page
â””â”€â”€ [cÃ¡c file liÃªn quan]

apps/frontend/src/app/question-form-demo/
â”œâ”€â”€ page.tsx                           # Question form demo
â””â”€â”€ [cÃ¡c file liÃªn quan]

apps/frontend/src/app/test-analytics/
â”œâ”€â”€ page.tsx                           # Analytics test page
â””â”€â”€ [cÃ¡c file liÃªn quan]

apps/frontend/src/app/test-auth/
â”œâ”€â”€ page.tsx                           # Auth test page
â””â”€â”€ [cÃ¡c file liÃªn quan]

apps/frontend/src/app/test-sticky-header/
â”œâ”€â”€ page.tsx                           # Sticky header test
â””â”€â”€ [cÃ¡c file liÃªn quan]

apps/frontend/src/app/question-crud-demo/
â”œâ”€â”€ [toÃ n bá»™ thÆ° má»¥c]                  # Question CRUD demo
```

### 2. Admin Demo Routes
```
apps/frontend/src/app/3141592654/admin/questions/filters-demo/
â”œâ”€â”€ page.tsx                           # Filters demo page
â””â”€â”€ [cÃ¡c file liÃªn quan]

apps/frontend/src/app/3141592654/admin/questions/filters-test/
â”œâ”€â”€ page.tsx                           # Filters test page
â””â”€â”€ [cÃ¡c file liÃªn quan]

apps/frontend/src/app/3141592654/admin/questions/enhanced-list-demo/
â”œâ”€â”€ [toÃ n bá»™ thÆ° má»¥c]                  # Enhanced list demo

apps/frontend/src/app/3141592654/admin/questions/mapcode-demo/
â”œâ”€â”€ [toÃ n bá»™ thÆ° má»¥c]                  # MapCode demo
```

### 3. Test Components
```
apps/frontend/src/components/test/
â”œâ”€â”€ sticky-header-demo.tsx             # Test component

apps/frontend/src/components/admin/test/
â”œâ”€â”€ color-test.tsx                     # Color test component
```

### 4. Test Documentation
```
docs/tests/
â”œâ”€â”€ devtools-fix-verification.md       # DevTools test documentation
```

### 5. Manual Verification Files
```
apps/frontend/src/components/admin/questions/filters/__tests__/
â”œâ”€â”€ manual-verification.ts             # Manual verification script
```

---

## ğŸ”§ Quy trÃ¬nh thá»±c hiá»‡n

### BÆ°á»›c 1: Backup vÃ  Preparation
```bash
# 1. Táº¡o backup branch
git checkout -b backup/before-cleanup-8.16
git add .
git commit -m "Backup before cleanup - 16/08/2025"

# 2. Táº¡o working branch
git checkout -b cleanup/demo-pages-8.16

# 3. Verify workspace location
pwd  # Pháº£i lÃ : d:\0.111\exam-bank-system
```

### BÆ°á»›c 2: Kiá»ƒm tra Dependencies trÆ°á»›c khi xÃ³a
```bash
# Kiá»ƒm tra import references
cd apps/frontend

# TÃ¬m references Ä‘áº¿n demo pages
grep -r "latex-demo" src/ --exclude-dir=node_modules
grep -r "question-form-demo" src/ --exclude-dir=node_modules
grep -r "test-analytics" src/ --exclude-dir=node_modules
grep -r "test-auth" src/ --exclude-dir=node_modules
grep -r "filters-demo" src/ --exclude-dir=node_modules
grep -r "mapcode-demo" src/ --exclude-dir=node_modules

# Kiá»ƒm tra component imports
grep -r "sticky-header-demo" src/ --exclude-dir=node_modules
grep -r "color-test" src/ --exclude-dir=node_modules
```

### BÆ°á»›c 3: XÃ³a files theo thá»© tá»± an toÃ n

#### 3.1 XÃ³a Test Components trÆ°á»›c
```bash
# XÃ³a test components (Ã­t risk nháº¥t)
rm -rf apps/frontend/src/components/test/sticky-header-demo.tsx
rm -rf apps/frontend/src/components/admin/test/color-test.tsx

# Kiá»ƒm tra build ngay
cd apps/frontend
pnpm type-check
```

#### 3.2 XÃ³a Demo Pages (Root Level)
```bash
# XÃ³a tá»«ng demo page
rm -rf apps/frontend/src/app/latex-demo/
rm -rf apps/frontend/src/app/question-form-demo/
rm -rf apps/frontend/src/app/test-analytics/
rm -rf apps/frontend/src/app/test-auth/
rm -rf apps/frontend/src/app/test-sticky-header/
rm -rf apps/frontend/src/app/question-crud-demo/

# Kiá»ƒm tra build
pnpm type-check
pnpm lint
```

#### 3.3 XÃ³a Admin Demo Routes
```bash
# XÃ³a admin demo routes
rm -rf apps/frontend/src/app/3141592654/admin/questions/filters-demo/
rm -rf apps/frontend/src/app/3141592654/admin/questions/filters-test/
rm -rf apps/frontend/src/app/3141592654/admin/questions/enhanced-list-demo/
rm -rf apps/frontend/src/app/3141592654/admin/questions/mapcode-demo/

# Kiá»ƒm tra build
pnpm type-check
pnpm lint
```

#### 3.4 XÃ³a Test Documentation
```bash
# XÃ³a test documentation
rm -rf docs/tests/devtools-fix-verification.md

# XÃ³a manual verification files
rm -rf apps/frontend/src/components/admin/questions/filters/__tests__/manual-verification.ts
```

---

## âœ… Káº¿ hoáº¡ch kiá»ƒm tra cháº¥t lÆ°á»£ng code

### 1. TypeScript Type-Check
```bash
cd apps/frontend

# Kiá»ƒm tra TypeScript errors
pnpm type-check

# Expected: No errors
# Náº¿u cÃ³ errors, kiá»ƒm tra vÃ  fix import statements
```

### 2. ESLint Check
```bash
cd apps/frontend

# Kiá»ƒm tra linting errors
pnpm lint

# Fix auto-fixable issues
pnpm lint --fix

# Expected: No errors hoáº·c chá»‰ warnings khÃ´ng critical
```

### 3. Build Process Verification
```bash
cd apps/frontend

# Test build process
pnpm build

# Expected: Build successful
# Kiá»ƒm tra khÃ´ng cÃ³ missing dependencies
```

### 4. Development Server Test
```bash
cd apps/frontend

# Start dev server
pnpm dev

# Test cÃ¡c routes chÃ­nh:
# - http://localhost:3000/ (Homepage)
# - http://localhost:3000/courses (Courses)
# - http://localhost:3000/3141592654/admin (Admin)

# Expected: Táº¥t cáº£ routes chÃ­nh hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng
```

---

## ğŸ“‹ Checklist Verification

### Pre-Cleanup Checklist
- [ ] Backup branch Ä‘Ã£ Ä‘Æ°á»£c táº¡o
- [ ] Working branch Ä‘Ã£ Ä‘Æ°á»£c táº¡o
- [ ] Workspace location Ä‘Ã£ Ä‘Æ°á»£c verify
- [ ] Dependencies Ä‘Ã£ Ä‘Æ°á»£c kiá»ƒm tra

### During Cleanup Checklist
- [ ] Test components Ä‘Ã£ Ä‘Æ°á»£c xÃ³a
- [ ] TypeScript check pass sau xÃ³a test components
- [ ] Demo pages (root level) Ä‘Ã£ Ä‘Æ°á»£c xÃ³a
- [ ] TypeScript check pass sau xÃ³a demo pages
- [ ] Admin demo routes Ä‘Ã£ Ä‘Æ°á»£c xÃ³a
- [ ] TypeScript check pass sau xÃ³a admin routes
- [ ] Test documentation Ä‘Ã£ Ä‘Æ°á»£c xÃ³a

### Post-Cleanup Checklist
- [ ] `pnpm type-check` - No errors
- [ ] `pnpm lint` - No critical errors
- [ ] `pnpm build` - Build successful
- [ ] `pnpm dev` - Dev server starts successfully
- [ ] Homepage loads correctly
- [ ] Courses page loads correctly
- [ ] Admin panel loads correctly
- [ ] No broken imports in console
- [ ] No 404 errors for existing routes

### Final Verification
- [ ] Git commit vá»›i message rÃµ rÃ ng
- [ ] Test trÃªn browser cÃ¡c routes chÃ­nh
- [ ] Kiá»ƒm tra console khÃ´ng cÃ³ errors
- [ ] Verify mockdata váº«n hoáº¡t Ä‘á»™ng
- [ ] Admin navigation váº«n hoáº¡t Ä‘á»™ng

---

## ğŸš¨ Backup Plan

### Náº¿u cÃ³ váº¥n Ä‘á» trong quÃ¡ trÃ¬nh cleanup:

#### 1. Rollback ngay láº­p tá»©c
```bash
# Quay vá» backup branch
git checkout backup/before-cleanup-8.16

# Hoáº·c reset working branch
git checkout cleanup/demo-pages-8.16
git reset --hard backup/before-cleanup-8.16
```

#### 2. Kiá»ƒm tra lá»—i cá»¥ thá»ƒ
```bash
# Xem TypeScript errors
pnpm type-check

# Xem build errors
pnpm build

# Kiá»ƒm tra missing imports
grep -r "import.*from.*demo" src/
```

#### 3. Fix tá»«ng file má»™t
- Identify file gÃ¢y lá»—i
- Restore file Ä‘Ã³ tá»« backup
- Tiáº¿p tá»¥c cleanup cÃ¡c files khÃ¡c

---

## ğŸ“Š Expected Results

### Files sáº½ Ä‘Æ°á»£c xÃ³a: ~15-20 files
### Folders sáº½ Ä‘Æ°á»£c xÃ³a: ~8-10 folders
### Estimated time: 30-45 phÃºt
### Risk level: Tháº¥p (chá»‰ xÃ³a demo/test files)

### Sau khi hoÃ n thÃ nh:
- Codebase sáº¡ch hÆ¡n, Ã­t clutter
- Build time cÃ³ thá»ƒ cáº£i thiá»‡n nháº¹
- Dá»… dÃ ng navigate trong codebase
- KhÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n production functionality

---

## ğŸ” Troubleshooting Common Issues

### Issue 1: TypeScript Import Errors
**Triá»‡u chá»©ng**: `Cannot find module` errors sau khi xÃ³a demo files
```bash
# TÃ¬m vÃ  fix import statements
grep -r "from.*demo" src/ --include="*.ts" --include="*.tsx"
grep -r "import.*demo" src/ --include="*.ts" --include="*.tsx"

# Fix báº±ng cÃ¡ch xÃ³a hoáº·c comment out imports
```

### Issue 2: Build Failures
**Triá»‡u chá»©ng**: Build process fails vá»›i missing dependencies
```bash
# Clear cache vÃ  rebuild
rm -rf .next/
rm -rf node_modules/.cache/
pnpm install
pnpm build
```

### Issue 3: Route References
**Triá»‡u chá»©ng**: CÃ³ references Ä‘áº¿n demo routes trong code
```bash
# TÃ¬m hardcoded routes
grep -r "/latex-demo" src/
grep -r "/test-" src/
grep -r "demo" src/ --include="*.ts" --include="*.tsx"

# Update hoáº·c remove references
```

---

## ğŸ“ Best Practices

### 1. Incremental Cleanup
- XÃ³a tá»«ng file/folder má»™t
- Test sau má»—i bÆ°á»›c xÃ³a
- Commit progress thÆ°á»ng xuyÃªn

### 2. Documentation Updates
- Update README.md náº¿u cÃ³ references Ä‘áº¿n demo pages
- Update navigation documentation
- Remove demo routes tá»« route documentation

### 3. Team Communication
- ThÃ´ng bÃ¡o team trÆ°á»›c khi cleanup
- Share backup branch location
- Document changes trong commit messages

---

## ğŸ“ˆ Metrics & Monitoring

### Before Cleanup
```bash
# Count files trÆ°á»›c cleanup
find apps/frontend/src/app -name "*.tsx" | wc -l
find apps/frontend/src/components -name "*.tsx" | wc -l
du -sh apps/frontend/src/
```

### After Cleanup
```bash
# Count files sau cleanup
find apps/frontend/src/app -name "*.tsx" | wc -l
find apps/frontend/src/components -name "*.tsx" | wc -l
du -sh apps/frontend/src/

# Build time comparison
time pnpm build
```

---

## ğŸ¯ Success Criteria

### âœ… Cleanup thÃ nh cÃ´ng khi:
1. Táº¥t cáº£ demo pages Ä‘Ã£ Ä‘Æ°á»£c xÃ³a
2. TypeScript type-check pass (0 errors)
3. ESLint check pass (no critical errors)
4. Build process successful
5. Dev server starts without errors
6. Core routes hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng
7. Admin panel accessible vÃ  functional
8. No broken imports trong browser console

### âŒ Rollback náº¿u:
1. Build process fails
2. Core functionality bá»‹ break
3. TypeScript errors khÃ´ng thá»ƒ fix
4. Admin panel khÃ´ng accessible
5. Critical routes tráº£ vá» 500 errors

---

**NgÆ°á»i thá»±c hiá»‡n**: [TÃªn ngÆ°á»i thá»±c hiá»‡n]
**NgÃ y thá»±c hiá»‡n**: [NgÃ y thá»±c hiá»‡n]
**Status**: [ ] Planned [ ] In Progress [ ] Completed [ ] Failed
**Backup Branch**: backup/before-cleanup-8.16
**Working Branch**: cleanup/demo-pages-8.16
