# Codebase Clean Up Plan - 16/08/2025

**Dự án**: NyNus Exam Bank System  
**Mục tiêu**: Clean up các demo pages, test files và components không cần thiết  
**Ngày tạo**: 16/08/2025  
**Workspace**: `d:\0.111\exam-bank-system`

---

## 📋 Tổng quan Clean Up

### 🎯 Mục tiêu
- Loại bỏ các demo pages không được sử dụng trong production
- Xóa test components và files development không cần thiết
- Giữ nguyên core functionality và build process
- Đảm bảo TypeScript type-check và ESLint pass

### ⚠️ Lưu ý quan trọng
- **KHÔNG** xóa thư mục `mockdata` - cần thiết cho development
- **KHÔNG** xử lý broken links trên homepage (sẽ xử lý riêng)
- **KHÔNG** xóa build scripts và tools cần thiết

---

## 📁 Danh sách Files cần xóa

### 1. Demo Pages (Root Level)
```
apps/frontend/src/app/latex-demo/
├── page.tsx                           # LaTeX demo page
└── [các file liên quan]

apps/frontend/src/app/question-form-demo/
├── page.tsx                           # Question form demo
└── [các file liên quan]

apps/frontend/src/app/test-analytics/
├── page.tsx                           # Analytics test page
└── [các file liên quan]

apps/frontend/src/app/test-auth/
├── page.tsx                           # Auth test page
└── [các file liên quan]

apps/frontend/src/app/test-sticky-header/
├── page.tsx                           # Sticky header test
└── [các file liên quan]

apps/frontend/src/app/question-crud-demo/
├── [toàn bộ thư mục]                  # Question CRUD demo
```

### 2. Admin Demo Routes
```
apps/frontend/src/app/3141592654/admin/questions/filters-demo/
├── page.tsx                           # Filters demo page
└── [các file liên quan]

apps/frontend/src/app/3141592654/admin/questions/filters-test/
├── page.tsx                           # Filters test page
└── [các file liên quan]

apps/frontend/src/app/3141592654/admin/questions/enhanced-list-demo/
├── [toàn bộ thư mục]                  # Enhanced list demo

apps/frontend/src/app/3141592654/admin/questions/mapcode-demo/
├── [toàn bộ thư mục]                  # MapCode demo
```

### 3. Test Components
```
apps/frontend/src/components/test/
├── sticky-header-demo.tsx             # Test component

apps/frontend/src/components/admin/test/
├── color-test.tsx                     # Color test component
```

### 4. Test Documentation
```
docs/tests/
├── devtools-fix-verification.md       # DevTools test documentation
```

### 5. Manual Verification Files
```
apps/frontend/src/components/admin/questions/filters/__tests__/
├── manual-verification.ts             # Manual verification script
```

---

## 🔧 Quy trình thực hiện

### Bước 1: Backup và Preparation
```bash
# 1. Tạo backup branch
git checkout -b backup/before-cleanup-8.16
git add .
git commit -m "Backup before cleanup - 16/08/2025"

# 2. Tạo working branch
git checkout -b cleanup/demo-pages-8.16

# 3. Verify workspace location
pwd  # Phải là: d:\0.111\exam-bank-system
```

### Bước 2: Kiểm tra Dependencies trước khi xóa
```bash
# Kiểm tra import references
cd apps/frontend

# Tìm references đến demo pages
grep -r "latex-demo" src/ --exclude-dir=node_modules
grep -r "question-form-demo" src/ --exclude-dir=node_modules
grep -r "test-analytics" src/ --exclude-dir=node_modules
grep -r "test-auth" src/ --exclude-dir=node_modules
grep -r "filters-demo" src/ --exclude-dir=node_modules
grep -r "mapcode-demo" src/ --exclude-dir=node_modules

# Kiểm tra component imports
grep -r "sticky-header-demo" src/ --exclude-dir=node_modules
grep -r "color-test" src/ --exclude-dir=node_modules
```

### Bước 3: Xóa files theo thứ tự an toàn

#### 3.1 Xóa Test Components trước
```bash
# Xóa test components (ít risk nhất)
rm -rf apps/frontend/src/components/test/sticky-header-demo.tsx
rm -rf apps/frontend/src/components/admin/test/color-test.tsx

# Kiểm tra build ngay
cd apps/frontend
pnpm type-check
```

#### 3.2 Xóa Demo Pages (Root Level)
```bash
# Xóa từng demo page
rm -rf apps/frontend/src/app/latex-demo/
rm -rf apps/frontend/src/app/question-form-demo/
rm -rf apps/frontend/src/app/test-analytics/
rm -rf apps/frontend/src/app/test-auth/
rm -rf apps/frontend/src/app/test-sticky-header/
rm -rf apps/frontend/src/app/question-crud-demo/

# Kiểm tra build
pnpm type-check
pnpm lint
```

#### 3.3 Xóa Admin Demo Routes
```bash
# Xóa admin demo routes
rm -rf apps/frontend/src/app/3141592654/admin/questions/filters-demo/
rm -rf apps/frontend/src/app/3141592654/admin/questions/filters-test/
rm -rf apps/frontend/src/app/3141592654/admin/questions/enhanced-list-demo/
rm -rf apps/frontend/src/app/3141592654/admin/questions/mapcode-demo/

# Kiểm tra build
pnpm type-check
pnpm lint
```

#### 3.4 Xóa Test Documentation
```bash
# Xóa test documentation
rm -rf docs/tests/devtools-fix-verification.md

# Xóa manual verification files
rm -rf apps/frontend/src/components/admin/questions/filters/__tests__/manual-verification.ts
```

---

## ✅ Kế hoạch kiểm tra chất lượng code

### 1. TypeScript Type-Check
```bash
cd apps/frontend

# Kiểm tra TypeScript errors
pnpm type-check

# Expected: No errors
# Nếu có errors, kiểm tra và fix import statements
```

### 2. ESLint Check
```bash
cd apps/frontend

# Kiểm tra linting errors
pnpm lint

# Fix auto-fixable issues
pnpm lint --fix

# Expected: No errors hoặc chỉ warnings không critical
```

### 3. Build Process Verification
```bash
cd apps/frontend

# Test build process
pnpm build

# Expected: Build successful
# Kiểm tra không có missing dependencies
```

### 4. Development Server Test
```bash
cd apps/frontend

# Start dev server
pnpm dev

# Test các routes chính:
# - http://localhost:3000/ (Homepage)
# - http://localhost:3000/courses (Courses)
# - http://localhost:3000/3141592654/admin (Admin)

# Expected: Tất cả routes chính hoạt động bình thường
```

---

## 📋 Checklist Verification

### Pre-Cleanup Checklist
- [ ] Backup branch đã được tạo
- [ ] Working branch đã được tạo
- [ ] Workspace location đã được verify
- [ ] Dependencies đã được kiểm tra

### During Cleanup Checklist
- [ ] Test components đã được xóa
- [ ] TypeScript check pass sau xóa test components
- [ ] Demo pages (root level) đã được xóa
- [ ] TypeScript check pass sau xóa demo pages
- [ ] Admin demo routes đã được xóa
- [ ] TypeScript check pass sau xóa admin routes
- [ ] Test documentation đã được xóa

### Post-Cleanup Checklist
- [ ] `pnpm type-check` - No errors
- [ ] `pnpm lint` - No critical errors
- [ ] `pnpm build` - Build successful
- [ ] `pnpm dev` - Dev server starts successfully
- [ ] Homepage loads correctly
- [ ] Courses page loads correctly
- [ ] Admin panel loads correctly
- [ ] No broken imports in console
- [ ] No 404 errors for existing routes

### Final Verification
- [ ] Git commit với message rõ ràng
- [ ] Test trên browser các routes chính
- [ ] Kiểm tra console không có errors
- [ ] Verify mockdata vẫn hoạt động
- [ ] Admin navigation vẫn hoạt động

---

## 🚨 Backup Plan

### Nếu có vấn đề trong quá trình cleanup:

#### 1. Rollback ngay lập tức
```bash
# Quay về backup branch
git checkout backup/before-cleanup-8.16

# Hoặc reset working branch
git checkout cleanup/demo-pages-8.16
git reset --hard backup/before-cleanup-8.16
```

#### 2. Kiểm tra lỗi cụ thể
```bash
# Xem TypeScript errors
pnpm type-check

# Xem build errors
pnpm build

# Kiểm tra missing imports
grep -r "import.*from.*demo" src/
```

#### 3. Fix từng file một
- Identify file gây lỗi
- Restore file đó từ backup
- Tiếp tục cleanup các files khác

---

## 📊 Expected Results

### Files sẽ được xóa: ~15-20 files
### Folders sẽ được xóa: ~8-10 folders
### Estimated time: 30-45 phút
### Risk level: Thấp (chỉ xóa demo/test files)

### Sau khi hoàn thành:
- Codebase sạch hơn, ít clutter
- Build time có thể cải thiện nhẹ
- Dễ dàng navigate trong codebase
- Không ảnh hưởng đến production functionality

---

## 🔍 Troubleshooting Common Issues

### Issue 1: TypeScript Import Errors
**Triệu chứng**: `Cannot find module` errors sau khi xóa demo files
```bash
# Tìm và fix import statements
grep -r "from.*demo" src/ --include="*.ts" --include="*.tsx"
grep -r "import.*demo" src/ --include="*.ts" --include="*.tsx"

# Fix bằng cách xóa hoặc comment out imports
```

### Issue 2: Build Failures
**Triệu chứng**: Build process fails với missing dependencies
```bash
# Clear cache và rebuild
rm -rf .next/
rm -rf node_modules/.cache/
pnpm install
pnpm build
```

### Issue 3: Route References
**Triệu chứng**: Có references đến demo routes trong code
```bash
# Tìm hardcoded routes
grep -r "/latex-demo" src/
grep -r "/test-" src/
grep -r "demo" src/ --include="*.ts" --include="*.tsx"

# Update hoặc remove references
```

---

## 📝 Best Practices

### 1. Incremental Cleanup
- Xóa từng file/folder một
- Test sau mỗi bước xóa
- Commit progress thường xuyên

### 2. Documentation Updates
- Update README.md nếu có references đến demo pages
- Update navigation documentation
- Remove demo routes từ route documentation

### 3. Team Communication
- Thông báo team trước khi cleanup
- Share backup branch location
- Document changes trong commit messages

---

## 📈 Metrics & Monitoring

### Before Cleanup
```bash
# Count files trước cleanup
find apps/frontend/src/app -name "*.tsx" | wc -l
find apps/frontend/src/components -name "*.tsx" | wc -l
du -sh apps/frontend/src/
```

### After Cleanup
```bash
# Count files sau cleanup
find apps/frontend/src/app -name "*.tsx" | wc -l
find apps/frontend/src/components -name "*.tsx" | wc -l
du -sh apps/frontend/src/

# Build time comparison
time pnpm build
```

---

## 🎯 Success Criteria

### ✅ Cleanup thành công khi:
1. Tất cả demo pages đã được xóa
2. TypeScript type-check pass (0 errors)
3. ESLint check pass (no critical errors)
4. Build process successful
5. Dev server starts without errors
6. Core routes hoạt động bình thường
7. Admin panel accessible và functional
8. No broken imports trong browser console

### ❌ Rollback nếu:
1. Build process fails
2. Core functionality bị break
3. TypeScript errors không thể fix
4. Admin panel không accessible
5. Critical routes trả về 500 errors

---

**Người thực hiện**: [Tên người thực hiện]
**Ngày thực hiện**: [Ngày thực hiện]
**Status**: [ ] Planned [ ] In Progress [ ] Completed [ ] Failed
**Backup Branch**: backup/before-cleanup-8.16
**Working Branch**: cleanup/demo-pages-8.16
