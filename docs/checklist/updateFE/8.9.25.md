# Checklist: Cải thiện Frontend (apps/frontend)

## 1) Thông tin cơ bản
- Ngày tạo: 09/08/2025
- Mục tiêu: Nâng chất lượng frontend theo NyNus Clean Code Standards, giảm rủi ro build/runtime, thống nhất UI components, tối ưu lint và DX (Developer Experience).
- Ước tính thời gian: 6–10 giờ (tuỳ vào mức độ trùng lặp component/hook và sửa import liên quan)

Trạng thái chung: [ ] Not started

---

## 2) Tasks theo mức độ ưu tiên

### 2.1 Critical

- [ ] Kích hoạt tailwindcss-animate cho Tailwind v4
  - Lý do: Các lớp animate-* (animate-in, fade-in-50, slide-in-from-*) không hoạt động nếu thiếu plugin; ảnh hưởng trực tiếp UI/UX.
  - Files cần sửa:
    - apps/frontend/src/app/globals.css
  - Công việc:
    - Thêm plugin sau dòng `@import "tailwindcss";`
    - `@plugin "tailwindcss-animate";`
  - Lệnh xác minh liên quan: (xem mục 5: Bước xác minh)
  - Acceptance criteria:
    - Build thành công; không cảnh báo về plugin Tailwind.
    - Các component dùng lớp animate-* hiển thị đúng hiệu ứng.

- [ ] Hợp nhất hook use-toast (nguồn sự thật duy nhất)
  - Lý do: Trùng lặp ở 2 nơi dẫn đến import nhầm, khó bảo trì.
  - Vị trí liên quan:
    - apps/frontend/src/hooks/use-toast.ts
    - apps/frontend/src/components/ui/feedback/use-toast.tsx
    - apps/frontend/src/components/ui/toast-container.tsx (container hiển thị)
    - apps/frontend/src/components/ui/feedback/{toaster,toast}.tsx (nếu dùng)
  - Công việc:
    - Chọn 1 hook chuẩn (khuyến nghị: components/ui/feedback/use-toast.tsx).
    - Gộp logic từ file còn lại; xoá file trùng sau khi cập nhật import trên toàn project.
    - Cập nhật tất cả import về hook mới (alias: `@/components/ui/feedback/use-toast`).
  - Gợi ý tìm import:
    - Tìm trong src/ các nơi `use-toast` đang được import để thay thế.
  - Acceptance criteria:
    - Không còn 2 file hook `use-toast`.
    - Lint/type-check pass; không còn import trỏ về file cũ.

- [ ] Hợp nhất ScrollToTop (một component duy nhất)
  - Lý do: Trùng lặp component gây confusions, tăng risk behavior lệch nhau.
  - Vị trí liên quan:
    - apps/frontend/src/components/ui/scroll-to-top.tsx
    - apps/frontend/src/components/ui/navigation/scroll-to-top.tsx
  - Công việc:
    - Chọn 1 phiên bản canonical (khuyến nghị: navigation/scroll-to-top.tsx).
    - Cập nhật tất cả import sang phiên bản chuẩn; xoá file cũ sau khi thay.
  - Acceptance criteria:
    - Chỉ còn một ScrollToTop.
    - MainLayout và các nơi sử dụng đều import đúng đường dẫn chuẩn.

### 2.2 High

- [ ] Sửa script "clean" tương thích PowerShell (dùng ";" thay vì "&&")
  - Lý do: Tránh lỗi khi chạy trên Windows PowerShell, tuân thủ quy ước dự án.
  - File cần sửa: apps/frontend/package.json
  - Hiện tại:
    - `"clean": "rm -rf .next && rm -rf node_modules && rm -rf tsconfig.tsbuildinfo"`
  - Đề xuất (PowerShell):
    - `"clean": "Remove-Item -Recurse -Force .next, node_modules, tsconfig.tsbuildinfo"`
  - Acceptance criteria:
    - Chạy `pnpm clean` xoá sạch thư mục/fiIe chỉ định trên Windows.

- [ ] Cải thiện ESLint rules theo NyNus Standards
  - Lý do: Bắt lỗi sớm (no-console, unused-vars, prefer-const, import/order), đồng nhất style.
  - File cần sửa: apps/frontend/eslint.config.mjs
  - Công việc gợi ý:
    - Thêm rules cơ bản: `no-console: error`, `prefer-const: error`, `@typescript-eslint/no-unused-vars: error`.
    - Tuỳ chọn: import/order (cần cài `eslint-plugin-import`).
  - Lệnh cài đặt (nếu dùng import/order):
    - `pnpm add -D eslint-plugin-import`
  - Acceptance criteria:
    - Lint fail khi dùng console.log hoặc biến không dùng.
    - Import được sắp xếp đúng nhóm (nếu bật plugin import).

- [ ] Loại trừ tsconfig.tsbuildinfo khỏi VCS
  - Lý do: File build info không nên commit; giảm nhiễu PR.
  - File: .gitignore (gốc repo)
  - Công việc:
    - Thêm dòng: `apps/frontend/tsconfig.tsbuildinfo`
  - Acceptance criteria:
    - Git không còn track file tsconfig.tsbuildinfo ở frontend.

### 2.3 Medium

- [ ] Đồng bộ shadcn CLI config với Tailwind v4
  - Lý do: `components.json` hiện trỏ `tailwind.config.js`, trong khi v4 có thể không cần file cấu hình; tránh nhầm lẫn khi generate component mới.
  - Files:
    - apps/frontend/components.json
    - (Tuỳ chọn) thêm `tailwind.config.ts` tối thiểu nếu team cần plugin/extend custom.
  - Công việc:
    - Xác nhận quy trình shadcn hiện tại; cập nhật `components.json` cho phù hợp (hoặc tạo `tailwind.config.ts`).
  - Acceptance criteria:
    - shadcn CLI hoạt động ổn định với cấu hình hiện tại.

- [ ] Rà soát và hợp nhất các UI components trùng lặp theo domain
  - Lý do: Hiện có các phiên bản song song ở `components/ui/*` và `components/ui/display/*` (card, badge, progress, skeleton, table...) gây khó bảo trì.
  - Công việc:
    - Lập danh sách component trùng lặp; chọn phiên bản canonical.
    - Cập nhật import trên toàn project; xoá phiên bản dư thừa.
  - Acceptance criteria:
    - Mỗi component chỉ có một nguồn sự thật; linter/type-check pass sau cập nhật.

- [ ] Cân nhắc tắt `allowJs` nếu không cần
  - File: apps/frontend/tsconfig.json
  - Công việc:
    - Nếu không còn file .js trong src/, đặt `"allowJs": false`.
  - Acceptance criteria:
    - Type-check pass; không có file .js cần thiết bị chặn.

---

## 3) Ghi chú kỹ thuật (tổng hợp nhanh)
- Tailwind animate plugin: thêm `@plugin "tailwindcss-animate";` vào apps/frontend/src/app/globals.css ngay sau `@import "tailwindcss";`.
- Script clean (PowerShell): chỉnh apps/frontend/package.json → `Remove-Item -Recurse -Force .next, node_modules, tsconfig.tsbuildinfo`.
- Hợp nhất use-toast: hợp nhất về `@/components/ui/feedback/use-toast` (đề xuất), cập nhật import toàn bộ src/.
- Hợp nhất ScrollToTop: dùng `@/components/ui/navigation/scroll-to-top` (đề xuất), cập nhật import toàn bộ src/.
- ESLint rules: bổ sung rule trong eslint.config.mjs; nếu thêm import/order cần `pnpm add -D eslint-plugin-import`.
- .gitignore: thêm `apps/frontend/tsconfig.tsbuildinfo`.
- shadcn CLI: xác nhận `components.json` và (tuỳ chọn) thêm `tailwind.config.ts` nếu cần mở rộng.

---

## 4) Trạng thái công việc (theo NyNus)
- [ ] Planning hoàn tất
- [ ] Development đang thực hiện
- [ ] Tests & Verification pass
- [ ] Documentation/PR cập nhật

---

## 5) Bước xác minh (không chạy tự động — dùng PowerShell)

- Di chuyển vào frontend:
  - `cd apps/frontend`

- Type-check:
  - `pnpm type-check`

- Lint nhóm (có sẵn script):
  - `pnpm lint:components` ; `pnpm lint:hooks` ; `pnpm lint:stores` ; `pnpm lint:lib` ; `pnpm lint:contexts` ; `pnpm lint:api`

- Lint tổng (tuỳ chọn):
  - `pnpm lint`

- Build thử (Turbopack):
  - `pnpm build`

- Tiêu chí pass:
  - Tất cả lệnh exit code 0; không lỗi nghiêm trọng.
  - UI có hiệu ứng animate hoạt động; không còn import trỏ tới component/hook bị xoá.

---

## 6) Ghi chú
- Không cài dependency mới nếu chưa được duyệt (trừ khi đã được chấp thuận cho eslint-plugin-import).
- Khi hợp nhất/xoá file trùng lặp: luôn cập nhật toàn bộ import và chạy lại lint + type-check trước commit.

