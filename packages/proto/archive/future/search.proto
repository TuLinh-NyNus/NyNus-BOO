syntax = "proto3";

package v1;

import "common/common.proto";

option go_package = "exam-bank-system/apps/backend/pkg/proto/v1";

// Láº·p láº¡i PostType Ä‘á»ƒ trÃ¡nh phá»¥ thuá»™c chÃ©o giá»¯a file proto
enum PostTypeForSearch {
  POST_TYPE_FOR_SEARCH_UNSPECIFIED = 0;
  POST_TYPE_FOR_SEARCH_ARTICLE = 1;
  POST_TYPE_FOR_SEARCH_THEORY = 2;
  POST_TYPE_FOR_SEARCH_MATH_NOTE = 3;
}

message SearchRequest {
  string query = 1;                      // tá»« khÃ³a
  string category = 2;                   // lá»c theo category
  repeated string tags = 3;              // lá»c theo tags
  PostTypeForSearch type = 4;            // lá»c theo loáº¡i bÃ i
  int32 limit = 5;                       // sá»‘ káº¿t quáº£ tá»‘i Ä‘a
  int32 offset = 6;                      // phÃ¢n trang (náº¿u khÃ´ng dÃ¹ng streaming)
}

message SearchHit {
  string id = 1;
  string slug = 2;
  string title = 3;
  string snippet = 4;
  PostTypeForSearch type = 5;
  float score = 6;
  int64 published_at = 7;
}

service SearchService {
  // Tráº£ káº¿t quáº£ dáº¡ng streaming Ä‘á»ƒ hiá»ƒn thá»‹ dáº§n
  rpc Search(SearchRequest) returns (stream SearchHit);
}

