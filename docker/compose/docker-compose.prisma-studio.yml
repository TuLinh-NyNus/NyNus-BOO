# Docker Compose configuration for Prisma Studio
# =================================================
# Prisma Studio provides a GUI to inspect and manage database data
#
# Usage:
#   Start: docker-compose -f docker/compose/docker-compose.yml -f docker/compose/docker-compose.prisma-studio.yml up prisma-studio
#   Stop:  docker-compose -f docker/compose/docker-compose.yml -f docker/compose/docker-compose.prisma-studio.yml down
#
# Access: http://localhost:5555

services:
  prisma-studio:
    image: node:20-alpine
    container_name: nynus-prisma-studio
    working_dir: /app
    command: sh -c "npm install -g pnpm && pnpm install && pnpm prisma generate && pnpm prisma studio --port 5555 --browser none"
    environment:
      # Connect to existing PostgreSQL container (NyNus-postgres)
      - DATABASE_URL=postgresql://exam_bank_user:exam_bank_password@NyNus-postgres:5432/exam_bank_db?schema=public&sslmode=disable
      - NODE_ENV=development
    ports:
      - "5555:5555"
    networks:
      - exam_bank_network
    volumes:
      # Mount frontend directory for Prisma schema and package.json
      - ../../apps/frontend:/app:rw
      # Mount node_modules from host to avoid reinstalling
      - ../../apps/frontend/node_modules:/app/node_modules:rw
    restart: unless-stopped

networks:
  exam_bank_network:
    name: compose_exam_bank_network
    external: true

