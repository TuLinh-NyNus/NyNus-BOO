# OpenSearch Environment Configuration
# Cấu hình môi trường cho OpenSearch Vietnamese Integration

# OpenSearch Cluster Settings
OPENSEARCH_CLUSTER_NAME=exam-bank-opensearch
OPENSEARCH_NODE_NAME=exam-bank-node-1
OPENSEARCH_DISCOVERY_TYPE=single-node

# Network Configuration
OPENSEARCH_HTTP_PORT=9200
OPENSEARCH_TRANSPORT_PORT=9300
OPENSEARCH_PERFORMANCE_PORT=9600

# Security Settings (Development)
OPENSEARCH_SECURITY_DISABLED=true
OPENSEARCH_SECURITY_PLUGIN_DISABLED=true

# Memory Settings
OPENSEARCH_JAVA_OPTS=-Xms512m -Xmx512m
OPENSEARCH_BOOTSTRAP_MEMORY_LOCK=true

# Performance Settings
OPENSEARCH_INDICES_QUERY_BOOL_MAX_CLAUSE_COUNT=10000
OPENSEARCH_INDICES_FIELDDATA_CACHE_SIZE=40%
OPENSEARCH_INDICES_BREAKER_TOTAL_LIMIT=70%

# Vietnamese Analysis Settings
OPENSEARCH_INDEX_ANALYSIS_ENABLED=true
OPENSEARCH_VIETNAMESE_PLUGINS_ENABLED=true

# Index Settings
OPENSEARCH_INDEX_PREFIX=questions
OPENSEARCH_INDEX_SHARDS=1
OPENSEARCH_INDEX_REPLICAS=0
OPENSEARCH_INDEX_REFRESH_INTERVAL=1s

# Search Settings
OPENSEARCH_SEARCH_TIMEOUT=30s
OPENSEARCH_SEARCH_MAX_BUCKETS=65536
OPENSEARCH_SEARCH_DEFAULT_SIZE=20
OPENSEARCH_SEARCH_MAX_SIZE=10000

# Logging Settings
OPENSEARCH_LOG_LEVEL=INFO
OPENSEARCH_DISCOVERY_LOG_LEVEL=DEBUG
OPENSEARCH_SLOW_LOG_THRESHOLD_QUERY_WARN=10s
OPENSEARCH_SLOW_LOG_THRESHOLD_QUERY_INFO=5s
OPENSEARCH_SLOW_LOG_THRESHOLD_FETCH_WARN=1s
OPENSEARCH_SLOW_LOG_THRESHOLD_FETCH_INFO=800ms

# Health Check Settings
OPENSEARCH_HEALTH_CHECK_INTERVAL=30s
OPENSEARCH_HEALTH_CHECK_TIMEOUT=10s
OPENSEARCH_HEALTH_CHECK_RETRIES=5

# OpenSearch Dashboards Settings
OPENSEARCH_DASHBOARDS_PORT=5601
OPENSEARCH_DASHBOARDS_HOST=0.0.0.0
OPENSEARCH_DASHBOARDS_SERVER_NAME=exam-bank-dashboards

# Development vs Production Settings
OPENSEARCH_ENV=development

# Production Settings (commented out for development)
# OPENSEARCH_SECURITY_DISABLED=false
# OPENSEARCH_JAVA_OPTS=-Xms2g -Xmx2g
# OPENSEARCH_INDEX_REPLICAS=1
# OPENSEARCH_LOG_LEVEL=WARN

# Backup and Snapshot Settings
OPENSEARCH_SNAPSHOT_REPOSITORY=backup
OPENSEARCH_SNAPSHOT_RETENTION_DAYS=30

# Monitoring Settings
OPENSEARCH_MONITORING_ENABLED=true
OPENSEARCH_MONITORING_INTERVAL=10s

# Vietnamese Text Processing Settings
VIETNAMESE_SYNONYMS_FILE=/usr/share/opensearch/config/synonyms/vietnamese-education.txt
VIETNAMESE_STOPWORDS_FILE=/usr/share/opensearch/config/analysis/vietnamese-stopwords.txt
VIETNAMESE_ANALYSIS_CONFIG=/usr/share/opensearch/config/analysis/vietnamese-analysis.yml

# Plugin Settings
OPENSEARCH_PLUGIN_ANALYSIS_ICU_ENABLED=true
OPENSEARCH_PLUGIN_ANALYSIS_PHONETIC_ENABLED=true
OPENSEARCH_PLUGIN_ANALYSIS_KUROMOJI_ENABLED=true

# Connection Pool Settings
OPENSEARCH_CONNECTION_POOL_SIZE=10
OPENSEARCH_CONNECTION_TIMEOUT=5s
OPENSEARCH_SOCKET_TIMEOUT=30s
OPENSEARCH_MAX_RETRY_TIMEOUT=30s
OPENSEARCH_MAX_RETRIES=3

# Circuit Breaker Settings
OPENSEARCH_BREAKER_REQUEST_LIMIT=60%
OPENSEARCH_BREAKER_FIELDDATA_LIMIT=40%
OPENSEARCH_BREAKER_IN_FLIGHT_REQUESTS_LIMIT=100%

# Thread Pool Settings
OPENSEARCH_THREAD_POOL_SEARCH_SIZE=5
OPENSEARCH_THREAD_POOL_SEARCH_QUEUE_SIZE=1000
OPENSEARCH_THREAD_POOL_INDEX_SIZE=2
OPENSEARCH_THREAD_POOL_INDEX_QUEUE_SIZE=200

# Cache Settings
OPENSEARCH_CACHE_QUERY_SIZE=10%
OPENSEARCH_CACHE_REQUEST_SIZE=1%
OPENSEARCH_CACHE_FIELDDATA_SIZE=40%

# Bulk Settings
OPENSEARCH_BULK_SIZE=5mb
OPENSEARCH_BULK_ACTIONS=1000
OPENSEARCH_BULK_CONCURRENT_REQUESTS=1
OPENSEARCH_BULK_FLUSH_INTERVAL=5s

# Vietnamese Education Domain Settings
EDUCATION_DOMAIN_SYNONYMS_COUNT=350
EDUCATION_DOMAIN_STOPWORDS_COUNT=50
EDUCATION_SUBJECTS_SUPPORTED=13
EDUCATION_GRADE_LEVELS=7

# Performance Targets
TARGET_SEARCH_RESPONSE_TIME_MS=200
TARGET_INDEX_RESPONSE_TIME_MS=100
TARGET_CONCURRENT_USERS=10000
TARGET_SEARCH_ACCURACY_PERCENT=95

# Maintenance Settings
MAINTENANCE_OPTIMIZE_SCHEDULE="0 2 * * *"
MAINTENANCE_SNAPSHOT_SCHEDULE="0 3 * * 0"
MAINTENANCE_LOG_CLEANUP_DAYS=7
